<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    design
 * @package     rwd_default
 * @copyright   Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http://www.magento.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Customer login form template
 *
 * @see app/design/frontend/base/default/template/customer/form/login.phtml
 */
/** @var $this Mage_Customer_Block_Form_Login */
?>
<!-- <div class="account-login<?php //if (!$this->helper('customer')->isRegistrationAllowed()) echo ' login-only' ?>"> -->
<div id="loginid" class="modal_login" style="display: none;">   
    <!-- <div class="page-title">
        <h1><?php //if ($this->helper('customer')->isRegistrationAllowed()): ?>
                <?php //echo $this->__('Login or Create an Account') ?>
            <?php //else: ?>
                <?php //echo $this->__('Login'); ?>
            <?php //endif; ?></h1>
    </div> -->
    <?php echo $this->getMessagesBlock()->toHtml() ?>
    <h1 class="h1">Login Form</h1>
    <form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="login-form" class="scaffold-form">
        <span onclick="document.getElementById('loginid').style.display='none'" class="close" title="Close Modal">&times;</span>
        <?php echo $this->getBlockHtml('formkey'); ?>
        <!-- <div class="col2-set">
            <?php //if ($this->helper('customer')->isRegistrationAllowed()): ?>
            <div class="col-1 new-users">
                <div class="content">
                    <h2><?php //echo $this->__('New Here?') ?></h2>
                    <p class="form-instructions"><?php //echo $this->__('Registration is free and easy!') ?></p>
                    <ul class="benefits">
                        <li><?php //echo $this->__('Faster checkout') ?></li>
                        <li><?php //echo $this->__('Save multiple shipping addresses') ?></li>
                        <li><?php //echo $this->__('View and track orders and more') ?></li>
                    </ul>
                </div>
                <div class="buttons-set">
                    <a title="<?php //echo $this->quoteEscape($this->__('Create an Account')) ?>" class="button" href="<?php //echo Mage::helper('persistent')->getCreateAccountUrl($this->getCreateAccountUrl()) ?>"><span><span><?php //echo $this->__('Create an Account') ?></span></span></a>
                </div>
            </div>
            <?php //endif; ?> -->
            <?php // This column should be col-1 if the registration column is not displayed ?>
            <div class="<?php if ($this->helper('customer')->isRegistrationAllowed()): ?>col-2<?php else: ?>col-1<?php endif; ?> registered-users">
                <div class="content fieldset">
                    <!-- <h2><?php //echo $this->__('Already registered?') ?></h2>
                    <p class="form-instructions"><?php //echo $this->__('If you have an account with us, please log in.') ?></p>
                    <p class="required"><?php //echo $this->__('* Required Fields') ?></p> -->
                    <ul class="form-list">
                        <li>
                            <label for="email" class="required"><em>*</em><?php echo $this->__('Email Address') ?></label>
                            <div class="input-box">
                                <input type="text" autocapitalize="off" autocorrect="off" spellcheck="false" name="login[username]" value="<?php echo $this->escapeHtml($this->getUsername()) ?>" id="email" class="input-text required-entry " title="<?php echo $this->quoteEscape($this->__('Email Address')) ?>" />
                            </div>
                        </li>
                        <li>
                            <label for="pass" class="required"><em>*</em><?php echo $this->__('Password') ?></label>
                            <div class="input-box">
                                <input type="password" name="login[password]" class="input-text required-entry validate-password" id="pass" title="<?php echo $this->quoteEscape($this->__('Password')) ?>" />
                            </div>
                        </li>
                        <?php echo $this->getChildHtml('form.additional.info'); ?>
                        <li>
                            <a href="<?php echo $this->getForgotPasswordUrl() ?>" class="f-left"><?php echo $this->__('Forgot Your Password?') ?></a>
                        </li>
                        <?php echo $this->getChildHtml('persistent.remember.me'); ?>
                    </ul>
                    <?php echo $this->getChildHtml('persistent.remember.me.tooltip'); ?>
                </div>
                <div class="buttons-set">
                    <button type="submit" class="button" title="<?php echo $this->quoteEscape($this->__('Login')) ?>" name="send" id="send2"><span><span><?php echo $this->__('Login') ?></span></span></button>
                </div>
            </div>
        <!-- </div> -->
        <?php if (Mage::helper('checkout')->isContextCheckout()): ?>
            <input name="context" type="hidden" value="checkout" />
        <?php endif; ?>
    </form>
    
</div>

<style type="text/css">
/* The Modal (background) */
    .modal_login {  
           display: block; /* Hidden by default */
           position: fixed; /* Stay in place */
           z-index: 200; /* Sit on top */
           left: 35%;
           top: 20%;
           width: 30%;
           height: 60%;
           overflow: auto; /* Enable scroll if needed */
           background-color: rgba(0,0,0,0.5); /* Black w/ opacity */
           padding: 10px 50px 50px 50px;
    }

/* Modal Content/Box */
    .scaffold-form {
           /*background-color: blue;*/
           /*margin: 5% 10% 10% 10%;*/ /* 5% from the top, 15% from the bottom and centered */
           padding: 10px 10px;
           /*text-align: center;*/
    }

/* The Close Button (x) */
    .close {
        position: absolute;
        right: 25px;
        top: 0px;
        color: #000;
        font-size: 35px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: red;
        cursor: pointer;
    }

    .h1 {
        text-align: center;
        color: white;
    }
</style>

<script type="text/javascript">
    //<![CDATA[
        jQuery(document).ready(function(){
        jQuery("span.label_loginpopup").click(function(e){
            e.preventDefault();
            jQuery(".modal_login").css("display", "block");
            jQuery(".modal_registration").css("display", "none");
        });
    });

        var dataForm = new VarienForm('login-form', true);
    //]]>
</script>
<script type="text/javascript">
    $j(document).ready(function(){
        $j('#login-form').submit(function(e){
            // e.preventDefault();
            $j("#email").removeClass("validation-failed");
            $j("#pass").removeClass("validation-failed");
            $j('.validation-advice').remove();
            var email = $j('#email').val();
            if(email == "")
            {
                validatefunc("email");
                e.preventDefault();
            }
            var pass = $j('#pass').val().trim();
            if(pass == "")
            {
                validatefunc("pass");
                e.preventDefault();
            }
            else if(pass.toString().length>0 && pass.toString().length<6)
            {
                $j("#pass").addClass("validation-failed");
                $j("#pass").after('<div class="validation-advice" id="advice-validate-password-pass">Please enter 6 or more characters. Leading or trailing spaces will be ignored.</div>');
                e.preventDefault();
            }    
        })
    })
</script>